(()=>{let e=!1,t=null,n=!1,o=!1,l=null,i=null,r=null;function a(e,t=!1){r&&r.parentNode&&(document.body.removeChild(r),r=null);const n=document.createElement("div");n.textContent=e,n.style.cssText=`\n    position: fixed;\n    top: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: ${t?"rgba(231, 76, 60, 0.9)":"rgba(52, 152, 219, 0.9)"};\n    color: white;\n    padding: 10px 20px;\n    border-radius: 4px;\n    z-index: 10001;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  `,document.body.appendChild(n),r=n,setTimeout((()=>{n.style.opacity="0",n.style.transition="opacity 0.5s ease",setTimeout((()=>{n.parentNode&&(document.body.removeChild(n),r===n&&(r=null))}),500)}),3e3)}const d=document.createElement("div");d.id="xpath-css-selector-panel",d.style.cssText="\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  width: 750px;\n  background-color: white;\n  border: 1px solid #ccc;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  z-index: 10000;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  display: none;\n  overflow: hidden;\n",d.innerHTML='\n  <div style="padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background-color: #f8f9fa;">\n    <h3 style="margin: 0; font-size: 16px; color: #2c3e50;">Element Selector Generator</h3>\n    <div>\n      <button id="minimize-panel" style="background: none; border: none; cursor: pointer; font-size: 16px; color: #7f8c8d; margin-right: 5px;">_</button>\n      <button id="close-panel" style="background: none; border: none; cursor: pointer; font-size: 16px; color: #7f8c8d;">×</button>\n    </div>\n  </div>\n  <div style="padding: 12px;">\n    <div id="language-tool-container" style="margin-bottom: 16px; border: 2px solid #3498db; border-radius: 6px; padding: 10px; background: #f4faff; display: flex; gap: 12px; align-items: center;">\n      <label for="language-select" style="font-size: 13px; color: #2c3e50; font-weight: 500;">Software Language:</label>\n      <select id="language-select" style="padding: 5px 10px; border-radius: 4px; border: 1px solid #ccc;">\n        <option value="java">Java</option>\n        <option value="python">Python</option>\n        <option value="csharp">C#</option>\n        <option value="javascript">JavaScript</option>\n        <option value="typescript">TypeScript</option>\n        <option value="ruby">Ruby</option>\n        <option value="kotlin">Kotlin</option>\n      </select>\n      <label for="tool-select" style="font-size: 13px; color: #2c3e50; font-weight: 500;">Tool:</label>\n      <select id="tool-select" style="padding: 5px 10px; border-radius: 4px; border: 1px solid #ccc;">\n        <option value="selenium">Selenium</option>\n        <option value="cypress">Cypress</option>\n        <option value="playwright">Playwright</option>\n        <option value="webdriverio">WebdriverIO</option>\n        <option value="testcafe">TestCafe</option>\n        <option value="puppeteer">Puppeteer</option>\n        <option value="selenide">Selenide</option>\n        <option value="robotframework">Robot Framework</option>\n      </select>\n    </div>\n    <div style="margin-bottom: 12px;">\n      <button id="activate-panel-selector" style="background-color: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Select Element</button>\n    </div>\n    <div style="margin-top: 16px;">\n      <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Result</h4>\n      <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px; max-height: 100px; overflow-y: auto; word-break: break-all; font-family: monospace; font-size: 12px;" id="panel-selector-result">No element selected yet</div>\n      <div id="panel-validation-result" style="margin: 8px 0; font-size: 12px; min-height: 18px;"></div>\n      <button id="panel-copy-selector" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;" disabled>Copy</button>\n    </div>\n    <div id="element-attributes" style="margin-top: 16px; display: none;">\n      <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Element Properties</h4>\n      <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px; max-height: 200px; overflow-y: auto;">\n        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n          <thead>\n            <tr style="background-color: #eee; text-align: left;">\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Property</th>\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Value</th>\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Matching</th>\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Process</th>\n            </tr>\n          </thead>\n          <tbody id="attribute-list">\n            \x3c!-- Properties will be added here --\x3e\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div id="element-actions" style="margin-top: 16px; display: none;">\n      <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Element Operations</h4>\n      <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px;">\n        <div id="element-type-info" style="margin-bottom: 8px; font-size: 12px;">Element Type: <span id="element-type">-</span></div>\n        <div id="click-action" style="margin-bottom: 8px;">\n          <button id="perform-click" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Click</button>\n        </div>\n        <div id="input-action" style="margin-bottom: 8px; display: none;">\n          <div style="display: flex; gap: 5px; margin-bottom: 5px;">\n            <input type="text" id="input-value" placeholder="Enter value" style="flex: 1; padding: 6px; border: 1px solid #ddd; border-radius: 4px;">\n            <button id="perform-input" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Send</button>\n          </div>\n        </div>\n        <div id="select-action" style="margin-bottom: 8px; display: none;">\n          <div style="display: flex; gap: 5px; margin-bottom: 5px;">\n            <select id="select-options" style="flex: 1; padding: 6px; border: 1px solid #ddd; border-radius: 4px;">\n                <option value="">Select option</option>\n            </select>\n            <button id="perform-select" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Select</button>\n          </div>\n        </div>\n        <div id="checkbox-action" style="margin-bottom: 8px; display: none;">\n          <button id="perform-checkbox" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Change Status</button>\n        </div>\n      </div>\n    </div>\n    <div style="margin-top: 16px;">\n      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n        <h4 style="margin: 0; font-size: 14px; color: #2c3e50;">Selector List</h4>\n        <button id="copy-all-selectors" style="margin-left: 12px; background-color: #27ae60; color: white; border: none; padding: 4px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; vertical-align: middle;">Copy All</button>\n        <button id="clear-history" style="background-color: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px; float: right;">Clear List</button>\n      </div>\n      <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; max-height: 150px; overflow-y: auto;">\n        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n          <thead>\n            <tr style="background-color: #eee; text-align: left;">\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Type</th>\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Selector</th>\n              <th style="padding: 6px; border-bottom: 1px solid #ddd;">Process</th>\n            </tr>\n          </thead>\n          <tbody id="selector-history">\n            \x3c!-- Selector history will be added here --\x3e\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n',document.body.appendChild(d),I();let s=document.createElement("div");function c(t){if(!e)return;const n=t.target;if(n===s||n===d||d.contains(n))return;const o=n.getBoundingClientRect();s.style.left=o.left+window.scrollX+"px",s.style.top=o.top+window.scrollY+"px",s.style.width=o.width+"px",s.style.height=o.height+"px",s.style.display="block"}function p(){e&&(s.style.display="none")}s.style.cssText="\n  position: absolute;\n  background-color: rgba(52, 152, 219, 0.3);\n  border: 2px solid rgba(41, 128, 185, 0.8);\n  z-index: 10000;\n  pointer-events: none;\n  transition: all 0.2s ease;\n",s.style.display="none",document.body.appendChild(s),document.getElementById("close-panel").addEventListener("click",(function(){d.style.display="none",n=!1})),document.getElementById("minimize-panel").addEventListener("click",(function(){const e=d.querySelector("div:nth-child(2)"),t=document.getElementById("close-panel");"none"===e.style.display?(e.style.display="block",this.textContent="_",t.style.display="inline"):(e.style.display="none",this.textContent="□",t.style.display="inline")})),document.getElementById("activate-panel-selector").addEventListener("click",(function(){e=!0,document.body.style.cursor="crosshair",a("Element selection mode active. Click on an element."),document.addEventListener("mouseover",c),document.addEventListener("mouseout",p)})),document.addEventListener("click",(function(n){if(e)return n.preventDefault(),n.stopPropagation(),e=!1,document.body.style.cursor="",s.style.display="none",document.removeEventListener("mouseover",c),document.removeEventListener("mouseout",p),t=n.target,x(t),b(t),a(`Element selected: <${t.tagName.toLowerCase()}>`),!1}),!0),document.getElementById("panel-copy-selector").addEventListener("click",(function(){const e=document.getElementById("panel-selector-result").textContent,t=document.getElementById("language-select").value,n=document.getElementById("tool-select").value,o=document.getElementById("notation-select"),l=function(e,t,n,o){const l=n.startsWith("/")||n.startsWith("(")||n.startsWith("//*[@")||n.startsWith("//"),i=function(e){let t=e.match(/^\/\/\*\[@id=['"]([^'"]+)['"]\]$/);if(t)return t[1];if(t=e.match(/^\/\/\w+\[@id=['"]([^'"]+)['"]\]$/),t)return t[1];if(t=e.match(/\[@id=['"]([^'"]+)['"]\]/),t)return t[1];let n=e.match(/^#([a-zA-Z0-9_-]+)$/);return n?n[1]:(n=e.match(/^#([a-zA-Z0-9_-]+)/),n?n[1]:(n=e.match(/^\[id=['"]([^'"]+)['"]\]$/),n?n[1]:(n=e.match(/^\w+\[id=['"]([^'"]+)['"]\]$/),n?n[1]:null)))}(n),r=null!==i;function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}if("java"===e&&"selenium"===t){let e="// Java + Selenium\n";return"FindBy"===o?r?`${e}@FindBy(id = "${i}")\nWebElement element;`:l?`${e}@FindBy(xpath = "${a(n)}")\nWebElement element;`:`${e}@FindBy(css = "${a(n)}")\nWebElement element;`:r?`${e}By locator = By.id("${i}");`:l?`${e}By locator = By.xpath("${a(n)}");`:`${e}By locator = By.cssSelector("${a(n)}");`}if("java"===e&&"playwright"===t){let e="// Java + Playwright\n";return r?`${e}Locator locator = page.locator("#${i}");`:l?`${e}Locator locator = page.locator("xpath=${a(n)}");`:`${e}Locator locator = page.locator("${a(n)}");`}if("csharp"===e&&"selenium"===t){let e="// C# + Selenium\n";return"FindBy"===o?r?`${e}[FindBy(How = How.Id, Using = "${i}")]\nprivate IWebElement element;`:l?`${e}[FindBy(How = How.XPath, Using = "${a(n)}")]\nprivate IWebElement element;`:`${e}[FindBy(How = How.CssSelector, Using = "${a(n)}")]\nprivate IWebElement element;`:r?`${e}By locator = By.Id("${i}");`:l?`${e}By locator = By.XPath("${a(n)}");`:`${e}By locator = By.CssSelector("${a(n)}");`}if("csharp"===e&&"playwright"===t){let e="// C# + Playwright\n";return r?`${e}var locator = page.Locator("#${i}");`:l?`${e}var locator = page.Locator("xpath=${a(n)}");`:`${e}var locator = page.Locator("${a(n)}");`}if("python"===e&&"selenium"===t){let e="# Python + Selenium\n";return r?`${e}element = driver.find_element(By.ID, "${i}")`:l?`${e}element = driver.find_element(By.XPATH, "${a(n)}")`:`${e}element = driver.find_element(By.CSS_SELECTOR, "${a(n)}")`}if("python"===e&&"playwright"===t){let e="# Python + Playwright\n";return r?`${e}locator = page.locator("#${i}")`:l?`${e}locator = page.locator("xpath=${a(n)}")`:`${e}locator = page.locator("${a(n)}")`}if("python"===e&&"robotframework"===t){let e="# Robot Framework\n";return r?`${e}Click Element  id=${i}`:l?`${e}Click Element  xpath=${a(n)}`:`${e}Click Element  css=${a(n)}`}if(("javascript"===e||"typescript"===e)&&"selenium"===t){let e="// JS/TS + Selenium\n";return r?`${e}const element = await driver.findElement(By.id("${i}"));`:l?`${e}const element = await driver.findElement(By.xpath("${a(n)}"));`:`${e}const element = await driver.findElement(By.css("${a(n)}"));`}if(("javascript"===e||"typescript"===e)&&"cypress"===t)return r?`// Cypress (JS/TS)\ncy.get("#${i}")`:l?`// Cypress (JS/TS) - cypress-xpath plugin gereklidir\ncy.xpath("${a(n)}")`:`// Cypress (JS/TS)\ncy.get("${a(n)}")`;if(("javascript"===e||"typescript"===e)&&"playwright"===t)return r?`// Playwright (JS/TS)\nawait page.locator('#${i}')`:l?`// Playwright (JS/TS)\nawait page.locator(\`xpath=${a(n)}\`)`:`// Playwright (JS/TS)\nawait page.locator("${a(n)}")`;if(("javascript"===e||"typescript"===e)&&"puppeteer"===t)return r?`// Puppeteer (JS/TS)\nconst element = await page.$("#${i}");`:l?`// Puppeteer (JS/TS)\nconst elements = await page.$x("${a(n)}");\nconst element = elements[0];`:`// Puppeteer (JS/TS)\nconst element = await page.$("${a(n)}");`;if("ruby"===e&&"selenium"===t){let e="# Ruby + Selenium\n";return r?`${e}element = driver.find_element(:id, "${i}")`:l?`${e}element = driver.find_element(:xpath, "${a(n)}")`:`${e}element = driver.find_element(:css, "${a(n)}")`}if("kotlin"===e&&"selenium"===t){let e="// Kotlin + Selenium\n";return r?`${e}val element = driver.findElement(By.id("${i}"))`:l?`${e}val element = driver.findElement(By.xpath("${a(n)}"))`:`${e}val element = driver.findElement(By.cssSelector("${a(n)}"))`}if("kotlin"===e&&"selenide"===t){let e="// Kotlin + Selenide\n";return r?`${e}val element = $By.id("${i}")`:l?`${e}val element = $By.xpath("${a(n)}")`:`${e}val element = $("${a(n)}")`}return n}(t,n,e,o&&"none"!==o.style.display?o.value:null);if(!l||"No element selected yet"===l)return void a("No selector to copy!",!0);const i=this;i.textContent="Copied!",i.style.backgroundColor="#27ae60",navigator.clipboard.writeText(l).then((()=>{setTimeout((()=>{i.textContent="Copy",i.style.backgroundColor="#3498db"}),2e3)})).catch((e=>{a("Copy error: "+e.message,!0),setTimeout((()=>{i.textContent="Copy",i.style.backgroundColor="#3498db"}),2e3)}))}));const u=function(e,t){const n=document.getElementById("selector-history"),o=Array.from(n.querySelectorAll("tr")).some((n=>{const o=n.querySelectorAll("td");if(o.length<2)return!1;const l=o[0].textContent.trim();let i=o[1].cloneNode(!0);i.querySelectorAll("span").forEach((e=>e.remove()));const r=i.textContent.trim();return l===e&&r===t}));if(o)return;const l=document.createElement("tr");l.style.borderBottom="1px solid #ddd";let i=0;try{i=e.startsWith("xpath")?document.evaluate(t,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:"tagName"===e?document.getElementsByTagName(t).length:document.querySelectorAll(t).length}catch(e){console.error("Error calculating the number of matching elements:",e)}let r="";"tagName"===e?r="Tag Name":"css-id"===e?r="CSS ID":"css-name"===e?r="CSS Name":"css-class"===e?r="CSS Class":"xpath-class"===e?r="XPath Class":"xpath-attr"===e&&(r="XPath Attribute"),l.innerHTML=`\n    <td style="padding: 6px;">${r}</td>\n    <td style="padding: 6px; word-break: break-all;">${t} <span style="color: #7f8c8d; font-size: 10px;">(${i} eşleşme)</span></td>\n    <td style="padding: 6px;">\n      <div style="display: flex; gap: 3px;">\n        <button class="use-selector" style="background-color: #3498db; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Use it</button>\n        <button class="delete-selector" style="background-color: #e74c3c; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Delete</button>\n      </div>\n    </td>\n  `,n.appendChild(l),l.querySelector(".use-selector").addEventListener("click",(function(){let n=t,o=e.startsWith("xpath")?"xpath":"tagName"===e?"tagName":"css";const l=n.match(/^(.*)\:nth-of-type\((\d+)\)$/);if("css"===o&&l){let e=l[1],t=l[2];e.startsWith("[")&&e.endsWith("]")?(n=`(//*${e})[${t}]`,o="xpath"):e.startsWith(".")?(n=`(//*[contains(concat(' ',normalize-space(@class),' '),' ${e.slice(1)} ')])[${t}]`,o="xpath"):e.startsWith("#")&&(n=`(//*[@id='${e.slice(1)}'])[${t}]`,o="xpath")}document.getElementById("panel-selector-result").textContent=n,document.getElementById("panel-copy-selector").disabled=!1;const i=function(e,t){try{return"xpath"===t?document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue:"tagName"===t?document.getElementsByTagName(e)[0]:document.querySelector(e)}catch(e){return console.error("Element finding error:",e),null}}(n,o);i?(b(i),m(i,n,o),x(i),a(`Selector used: ${n}`)):a("No elements matching this selector were found",!0)})),l.querySelector(".delete-selector").addEventListener("click",(function(){n.removeChild(l),h()}))};function m(e,t,n){y();let o=[],l=-1;try{if("xpath"===n){const n=document.evaluate(t,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let t=0;t<n.snapshotLength;t++){const i=n.snapshotItem(t);o.push(i),i===e&&(l=t)}}else o=Array.from(document.querySelectorAll(t)),l=o.indexOf(e)}catch(e){console.error("Error finding matching elements:",e)}if(o.forEach(((t,n)=>{const o=t.getBoundingClientRect(),l=document.createElement("div");l.className="selector-highlight";const i=t===e;l.style.cssText=`\n      position: absolute;\n      left: ${o.left+window.scrollX}px;\n      top: ${o.top+window.scrollY}px;\n      width: ${o.width}px;\n      height: ${o.height}px;\n      background-color: ${i?"rgba(46, 204, 113, 0.3)":"rgba(241, 196, 15, 0.3)"};\n      border: 2px solid ${i?"rgba(39, 174, 96, 0.8)":"rgba(243, 156, 18, 0.8)"};\n      z-index: 9999;\n      pointer-events: none;\n      ${i?"animation: pulse 1.5s infinite;":""}\n    `;const r=document.createElement("div");r.style.cssText=`\n      position: absolute;\n      top: -20px;\n      left: 0;\n      background-color: ${i?"rgba(39, 174, 96, 0.9)":"rgba(243, 156, 18, 0.9)"};\n      color: white;\n      padding: 2px 6px;\n      border-radius: 3px;\n      font-size: 10px;\n      font-weight: bold;\n      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    `,r.textContent=`İndeks: ${n+1}`,l.appendChild(r),document.body.appendChild(l)})),!document.getElementById("highlight-animation-style")){const e=document.createElement("style");e.id="highlight-animation-style",e.textContent="\n      @keyframes pulse {\n        0% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0.4); }\n        70% { box-shadow: 0 0 0 10px rgba(39, 174, 96, 0); }\n        100% { box-shadow: 0 0 0 0 rgba(39, 174, 96, 0); }\n      }\n    ",document.head.appendChild(e)}a(`Total ${o.length} matches found. Selected element index: ${l+1}`),setTimeout((()=>{y()}),5e3)}function y(){document.querySelectorAll(".selector-highlight").forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)}))}function x(e){if(!e)return;const t=document.getElementById("attribute-list"),n=document.getElementById("element-attributes"),r=document.getElementById("element-actions");t.innerHTML="";const d=e.tagName.toLowerCase(),s=document.getElementsByTagName(d).length,c=document.createElement("tr");c.style.borderBottom="1px solid #ddd";let p="";p=s>1?`\n        <button id="index-btn-tagName-${d}" class="index-highlight-btn" style="background-color: #8e44ad; color: white; border: none; padding: 2px 6px; border-radius: 2px; cursor: pointer; font-size: 10px;">Index</button>\n        <input id="index-input-tagName-${d}" type="number" min="1" max="${s}" value="1" style="width: 40px; font-size: 11px; padding: 2px 4px; border-radius: 2px; border: 1px solid #ccc;" />\n        <button class="use-attribute" data-attr="tagName" data-value="${d}" style="background-color: #3498db; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n      `:`\n        <button class="use-attribute" data-attr="tagName" data-value="${d}" style="background-color: #3498db; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n        \x3c!--\n        <button id="index-btn-tagName-${d}" class="index-highlight-btn" style="background-color: #8e44ad; color: white; border: none; padding: 2px 6px; border-radius: 2px; cursor: pointer; font-size: 10px;" disabled>Index</button>\n        <input id="index-input-tagName-${d}" type="number" min="1" max="${s}" value="1" style="width: 40px; font-size: 11px; padding: 2px 4px; border-radius: 2px; border: 1px solid #ccc;" disabled />\n        --\x3e\n      `,c.innerHTML=`\n    <td style="padding: 6px; font-weight: bold;">tagName</td>\n    <td style="padding: 6px;">${d}</td>\n    <td style="padding: 6px; text-align: center;">${s}</td>\n    <td style="padding: 6px; display: flex; gap: 4px; align-items: center;">\n      ${p}\n    </td>\n  `,t.appendChild(c);for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n];let s=0;try{const e=`//${d}[@${r.name}="${r.value}"]`;s=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(e){console.error("Error calculating the number of matching elements:",e)}const c=document.createElement("tr");c.style.borderBottom="1px solid #ddd";const p=1===s;let u="#3498db";"id"===r.name&&r.value.includes("_")?u="#e74c3c":p&&(u="#27ae60");const y=`index-input-${r.name}-${r.value}`.replace(/[^a-zA-Z0-9_-]/g,""),x=`index-btn-${r.name}-${r.value}`.replace(/[^a-zA-Z0-9_-]/g,""),b=`add-btn-${r.name}-${r.value}`.replace(/[^a-zA-Z0-9_-]/g,"");let h="";h=s>1?`\n            <button id="${x}" class="index-highlight-btn" style="background-color: #8e44ad; color: white; border: none; padding: 2px 6px; border-radius: 2px; cursor: pointer; font-size: 10px;">Index</button>\n            <input id="${y}" type="number" min="1" max="${s}" value="1" style="width: 40px; font-size: 11px; padding: 2px 4px; border-radius: 2px; border: 1px solid #ccc;" />\n            <button id="${b}" class="use-attribute" data-attr="${r.name}" data-value="${r.value}" style="background-color: ${u}; color: white; border: none; padding: 2px 6px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n          `:`\n            <button id="${b}" class="use-attribute" data-attr="${r.name}" data-value="${r.value}" style="background-color: ${u}; color: white; border: none; padding: 2px 6px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n            \x3c!--\n            <button id="${x}" class="index-highlight-btn" style="background-color: #8e44ad; color: white; border: none; padding: 2px 6px; border-radius: 2px; cursor: pointer; font-size: 10px;" disabled>Index</button>\n            <input id="${y}" type="number" min="1" max="${s}" value="1" style="width: 40px; font-size: 11px; padding: 2px 4px; border-radius: 2px; border: 1px solid #ccc;" disabled />\n            --\x3e\n          `,c.innerHTML=`\n      <td style="padding: 6px; font-weight: bold; ${p?"color: #27ae60;":""}">${r.name}</td>\n      <td style="padding: 6px; ${p?"color: #27ae60;":""}">${r.value}</td>\n      <td style="padding: 6px; text-align: center; ${p?"color: #27ae60; font-weight: bold;":""}">${s}</td>\n      <td style="padding: 6px; display: flex; gap: 4px; align-items: center;">\n        ${h}\n      </td>\n    `,t.appendChild(c),setTimeout((()=>{const t=document.getElementById(x);t&&t.addEventListener("click",(function(){let t="",n="";"tagName"===r.name?(t=`//${r.value}`,n="xpath"):"id"===r.name?(t=`#${r.value}`,n="css"):"name"===r.name?(t=`[name="${r.value}"]`,n="css"):"class"===r.name?r.value.includes(" ")?(t=`//${d}[@class="${r.value}"]`,n="xpath"):(t=`.${r.value}`,n="css"):"text()"===r.name?(t=`//${d}[text()="${r.value}"]`,n="xpath"):"contains()"===r.name?(t=`//${d}[contains(text(),"${r.value}")]`,n="xpath"):"button"===r.name?(t=r.value,n="xpath"):(t=`//${d}[@${r.name}="${r.value}"]`,n="xpath"),m(e,t,n)}))}),0),setTimeout((()=>{const t=document.getElementById(b),n=document.getElementById(y);t&&n&&t.addEventListener("click",(function(){const t=this.getAttribute("data-attr"),r=this.getAttribute("data-value");let s="";s="tagName"===t?`//${r}`:"id"===t?`//*[@id='${r}']`:"name"===t?`//*[@name='${r}']`:"class"===t?r.includes(" ")?`//${d}[@class='${r}']`:`//*[contains(concat(' ',normalize-space(@class),' '),' ${r} ')]`:"text()"===t?`//${d}[text()='${r}']`:"contains()"===t?`//${d}[contains(text(),'${r}')]`:"button"===t?r:`//${d}[@${t}='${r}']`;let c=1;try{c=document.evaluate(s,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch{}let p=parseInt(n.value,10);if(!isNaN(p)&&p>=1&&p<=c){c>1&&(s=`(${s})[${p}]`),document.getElementById("panel-selector-result").textContent=s,document.getElementById("panel-copy-selector").disabled=!1;let n="xpath";s.includes("[@class=")?n="xpath-class":(s.includes("[@")||s.includes("text()")||s.includes("contains("))&&(n="xpath-attr"),s===l&&n===i||(addToSelectorHistory(n,s),l=s,i=n),o=!1,m(e,s,"xpath"),a(`${t} attribute used to create xpath selector and added to the list`)}else a("Invalid index entered. Selector not added.",!0)}))}),0)}if(e.textContent&&e.textContent.trim()){const n=e.textContent.trim();let o=0;try{const e=`//${d}[text()="${n}"]`;o=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(e){console.error("Error calculating the number of text matches:",e)}const l=document.createElement("tr");l.style.borderBottom="1px solid #ddd";const i=1===o;if(l.innerHTML=`\n      <td style="padding: 6px; font-weight: bold; ${i?"color: #27ae60;":""}">text()</td>\n      <td style="padding: 6px; ${i?"color: #27ae60;":""}">${n.length>30?n.substring(0,30)+"...":n}</td>\n      <td style="padding: 6px; text-align: center; ${i?"color: #27ae60; font-weight: bold;":""}">${o}</td>\n      <td style="padding: 6px;">\n        <button class="use-attribute" data-attr="text()" data-value="${n}" style="background-color: ${i?"#27ae60":"#3498db"}; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n      </td>\n    `,t.appendChild(l),n.length>5){const e=document.createElement("tr");e.style.borderBottom="1px solid #ddd";let o=0;try{const e=`//${d}[contains(text(),"${n}")]`;o=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(e){console.error("Error calculating the number of contains matches:",e)}e.innerHTML=`\n          <td style="padding: 6px; font-weight: bold;">contains()</td>\n          <td style="padding: 6px;">contains(text(),"${n.length>30?n.substring(0,30)+"...":n}")</td>\n          <td style="padding: 6px; text-align: center;">${o}</td>\n          <td style="padding: 6px;">\n            <button class="use-attribute" data-attr="contains()" data-value="${n}" style="background-color: #3498db; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n          </td>\n        `,t.appendChild(e)}}if("a"===d&&"button"===e.getAttribute("role")){const n=document.createElement("tr");n.style.borderBottom="1px solid #ddd",n.style.backgroundColor="rgba(241, 196, 15, 0.1)";let o=0;try{const e='//a[@role="button"]';o=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(e){console.error("Error calculating the number of button matches:",e)}let l='//a[@role="button"]';if(e.textContent&&e.textContent.trim()){l=`//a[@role="button" and text()="${e.textContent.trim()}"]`;try{o=document.evaluate(l,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch(e){console.error("Error calculating the number of button text matches:",e)}}n.innerHTML=`\n      <td style="padding: 6px; font-weight: bold; color: #d35400;">button</td>\n      <td style="padding: 6px; color: #d35400;">${l}</td>\n      <td style="padding: 6px; text-align: center; color: #d35400;">${o}</td>\n      <td style="padding: 6px;">\n        <button class="use-attribute" data-attr="button" data-value="${l}" style="background-color: #e67e22; color: white; border: none; padding: 2px 5px; border-radius: 2px; cursor: pointer; font-size: 10px;">Add</button>\n      </td>\n    `,t.appendChild(n)}t.querySelectorAll(".use-attribute").forEach((t=>{const n=t.parentElement;if(n&&n.querySelector('input[type="number"]')){const e=t.cloneNode(!0);return void n.replaceChild(e,t)}const r=t.cloneNode(!0);t.parentElement.replaceChild(r,t),r.addEventListener("click",(function(){const t=this.getAttribute("data-attr"),n=this.getAttribute("data-value");let r="",s="",c=1;if("tagName"===t){r=`//${n}`,s="xpath";try{c=document.getElementsByTagName(n).length}catch{}}else if("id"===t){r=`#${n}`,s="css";try{c=document.querySelectorAll(r).length}catch{}}else if("name"===t){r=`[name="${n}"]`,s="css";try{c=document.querySelectorAll(r).length}catch{}}else if("class"===t)if(n.includes(" ")){r=`//${d}[@class="${n}"]`,s="xpath";try{c=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch{}}else{r=`.${n}`,s="css";try{c=document.querySelectorAll(r).length}catch{}}else if("text()"===t){r=`//${d}[text()="${n}"]`,s="xpath";try{c=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch{}}else if("contains()"===t){r=`//${d}[contains(text(),"${n}")]`,s="xpath";try{c=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch{}}else if("button"===t){r=n,s="xpath";try{c=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch{}}else{r=`//${d}[@${t}="${n}"]`,s="xpath";try{c=document.evaluate(r,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}catch{}}c>1&&(m(e,r,s),"xpath"===s?r=`(${r})[1]`:"css"===s&&(r=`${r}:nth-of-type(1)`),a("Multiple matches found, first match automatically added.")),document.getElementById("panel-selector-result").textContent=r,document.getElementById("panel-copy-selector").disabled=!1;let p=s;"css"===s?p=r.startsWith("#")?"css-id":r.startsWith(".")?"css-class":r.startsWith("[name=")?"css-name":"css":"xpath"===s?p=r.includes("[@class=")?"xpath-class":r.includes("[@")||r.includes("text()")||r.includes("contains(")?"xpath-attr":"xpath":"tagName"===s&&(p="tagName"),r===l&&p===i||(addToSelectorHistory(p,r),l=r,i=p),o=!1,m(e,r,s),a(`${t} attribute used to create ${s} selector and added to the list`)}))})),n.style.display="block",r.style.display="block"}function b(e){if(!e)return;const t=E(e),n=document.getElementById("element-type"),r=document.getElementById("element-actions"),d=document.getElementById("click-action"),s=document.getElementById("input-action"),c=document.getElementById("select-action"),p=document.getElementById("checkbox-action");n.textContent=t,r.style.display="block",d.style.display="none",s.style.display="none",c.style.display="none",p.style.display="none";const u=e.tagName.toLowerCase();if(d.style.display="block",document.getElementById("perform-click").onclick=function(){try{const t=document.getElementById("panel-selector-result").textContent,n=t.startsWith("//")?"xpath":"css";let r=n;"css"===n?r=t.startsWith("#")?"css-id":t.startsWith(".")?"css-class":t.startsWith("[name=")?"css-name":"css":"xpath"===n?r=t.includes("[@class=")?"xpath-class":t.includes("[@")||t.includes("text()")||t.includes("contains(")?"xpath-attr":"xpath":"tagName"===n&&(r="tagName");const d=()=>{setTimeout((()=>{if("a"===e.tagName.toLowerCase()&&e.href)window.location.href=e.href,a("Link opened in new tab and selector saved.");else{const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t),a("Element clicked")}}),1e3)};!o||t===l&&r===i?o||t===l&&r===i?d():addToSelectorHistory(r,t,(function(){l=t,i=r,d()})):addToSelectorHistory(r,t,(function(){l=t,i=r,o=!1,d()}))}catch(e){a("Click operation failed: "+e.message,!0)}},"input"===u&&["text","email","password","search","tel","url","number"].includes(e.type)&&(s.style.display="block",document.getElementById("input-value").value=e.value||"",document.getElementById("perform-input").onclick=function(){try{const t=document.getElementById("input-value").value;e.focus(),e.value=t;const n=new Event("input",{bubbles:!0});e.dispatchEvent(n);const o=new Event("change",{bubbles:!0});e.dispatchEvent(o),a("Value sent")}catch(e){a("Value sending operation failed: "+e.message,!0)}}),"select"===u){c.style.display="block";const t=document.getElementById("select-options");t.innerHTML='<option value="">Select option</option>',Array.from(e.options).forEach(((e,n)=>{const o=document.createElement("option");o.value=n,o.textContent=e.textContent,t.appendChild(o),e.selected&&(t.value=n)})),document.getElementById("perform-select").onclick=function(){try{e.selectedIndex=parseInt(t.value,10);const n=new Event("change",{bubbles:!0});e.dispatchEvent(n),a("Option selected")}catch(e){a("Selection operation failed: "+e.message,!0)}}}if("input"===u&&"checkbox"===e.type){p.style.display="block";const t=document.getElementById("perform-checkbox");t.textContent=e.checked?"Remove Check":"Check it",t.onclick=function(){try{e.checked=!e.checked;const t=new Event("change",{bubbles:!0});e.dispatchEvent(t),a("Status changed")}catch(e){a("Status change operation failed: "+e.message,!0)}}}}function h(e){try{const t=document.getElementById("selector-history"),n=Array.from(t.querySelectorAll("tr")).map((e=>{const t=e.querySelectorAll("td");if(t.length<2)return null;const n=t[0].textContent.trim();let o=t[1].cloneNode(!0);o.querySelectorAll("span").forEach((e=>e.remove()));const l=o.textContent.trim();return!l||l.match(/^\(\d+ eşleşme\)$/)?null:{type:n,selector:l}})).filter(Boolean),o={left:d.style.left||"20px",top:d.style.top||"20px"};chrome.storage.local.set({selectorHistory:n,panelPosition:o,isPanelVisible:"block"===d.style.display},(()=>{console.log("Data saved:",{selectorHistory:n,panelPosition:o}),"function"==typeof e&&e()}))}catch(t){console.error("Save error:",t),"function"==typeof e&&e(t)}}function g(e=0){const t=document.getElementById("selector-history");t?chrome.storage.local.get(["selectorHistory","panelPosition","isPanelVisible"],(e=>{e.panelPosition&&(d.style.left=e.panelPosition.left,d.style.top=e.panelPosition.top,e.panelPosition.width&&(d.style.width=e.panelPosition.width),e.panelPosition.height&&(d.style.height=e.panelPosition.height)),window.isPanelVisible=e.isPanelVisible,d.style.display=e.isPanelVisible?"block":"none",e.selectorHistory?.length>0&&(t.innerHTML="",e.selectorHistory.forEach((e=>{let t;switch(e.type){case"XPath Class":t="xpath-class";break;case"XPath Attribute":t="xpath-attr";break;case"CSS ID":t="css-id";break;case"CSS Name":t="css-name";break;case"CSS Class":t="css-class";break;case"Tag Name":t="tagName";break;default:return void console.warn("Unknown type:",e.type)}"function"==typeof window.originalAddToSelectorHistory?window.originalAddToSelectorHistory(t,e.selector):"function"==typeof window.addToSelectorHistory?window.addToSelectorHistory(t,e.selector):u(t,e.selector)})))})):e<20&&setTimeout((()=>g(e+1)),100)}document.addEventListener("DOMContentLoaded",(()=>{setTimeout(g,1e3)})),window.addEventListener("beforeunload",h);let f,v,$=!1;function E(e){if(!e)return"Bilinmeyen";const t=e.tagName.toLowerCase();return"input"===t?`Input (${e.type||"text"})`:"select"===t?"Select":"textarea"===t?"Textarea":"button"===t?"Button":"a"===t?"Link":t}function E(e){if(!e)return"Unknown";const t=e.tagName.toLowerCase();return"input"===t?`Input (${e.type||"text"})`:"select"===t?"Select":"textarea"===t?"Textarea":"button"===t?"Button":"a"===t?"Link":t}function w(){document.getElementById("xpath-css-selector-panel")||(document.body.appendChild(d),d.style.display=n?"block":"none"),document.getElementById("selector-history")||(d.innerHTML='\n          <div style="padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background-color: #f8f9fa;">\n            <h3 style="margin: 0; font-size: 16px; color: #2c3e50;">Primer Locator Generator</h3>\n            <div>\n              <button id="minimize-panel" style="background: none; border: none; cursor: pointer; font-size: 16px; color: #7f8c8d; margin-right: 5px;">_</button>\n              <button id="close-panel" style="background: none; border: none; cursor: pointer; font-size: 16px; color: #7f8c8d;">×</button>\n            </div>\n          </div>\n          <div style="padding: 12px;">\n            <div style="margin-bottom: 12px;">\n              <button id="activate-panel-selector" style="background-color: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Select Element</button>\n            </div>\n            <div style="margin-top: 16px;">\n              <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Result</h4>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px; max-height: 100px; overflow-y: auto; word-break: break-all; font-family: monospace; font-size: 12px;" id="panel-selector-result">No element selected yet</div>\n              <div id="panel-validation-result" style="margin: 8px 0; font-size: 12px; min-height: 18px;"></div>\n              <button id="panel-copy-selector" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;" disabled>Copy</button>\n            </div>\n            <div id="element-attributes" style="margin-top: 16px; display: none;">\n              <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Element Properties</h4>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px; max-height: 200px; overflow-y: auto;">\n                <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n                  <thead>\n                    <tr style="background-color: #eee; text-align: left;">\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Feature</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Value</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Matching</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Process</th>\n                    </tr>\n                  </thead>\n                  <tbody id="attribute-list">\n                    \x3c!-- Features will be added here --\x3e\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div id="element-actions" style="margin-top: 16px; display: none;">\n              <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Element Operations</h4>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px;">\n                <div id="element-type-info" style="margin-bottom: 8px; font-size: 12px;">Element Type: <span id="element-type">-</span></div>\n                <div id="click-action" style="margin-bottom: 8px;">\n                  <button id="perform-click" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Click</button>\n                </div>\n                <div id="input-action" style="margin-bottom: 8px; display: none;">\n                  <div style="display: flex; gap: 5px; margin-bottom: 5px;">\n                    <input type="text" id="input-value" placeholder="Değer girin" style="flex: 1; padding: 6px; border: 1px solid #ddd; border-radius: 4px;">\n                    <button id="perform-input" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Send</button>\n                  </div>\n                </div>\n                <div id="select-action" style="margin-bottom: 8px; display: none;">\n                  <div style="display: flex; gap: 5px; margin-bottom: 5px;">\n                    <select id="select-options" style="flex: 1; padding: 6px; border: 1px solid #ddd; border-radius: 4px;">\n                      <option value="">Seçenek seçin</option>\n                    </select>\n                    <button id="perform-select" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Select</button>\n                  </div>\n                </div>\n                <div id="checkbox-action" style="margin-bottom: 8px; display: none;">\n                  <button id="perform-checkbox" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Change Status</button>\n                </div>\n              </div>\n            </div>\n            <div style="margin-top: 16px;">\n              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n                <h4 style="margin: 0; font-size: 14px; color: #2c3e50;">Seçici Listesi</h4>\n                <button id="clear-history" style="background-color: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">Clear List</button>\n              </div>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; max-height: 150px; overflow-y: auto;">\n                <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n                  <thead>\n                    <tr style="background-color: #eee; text-align: left;">\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Type</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Selector</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Process</th>\n                    </tr>\n                  </thead>\n                  <tbody id="selector-history">\n                    \x3c!-- Selector history will be added here --\x3e\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        ',window.selectedElement&&x(window.selectedElement))}d.querySelector("div:first-child").addEventListener("mousedown",(function(e){"minimize-panel"!==e.target.id&&"close-panel"!==e.target.id&&($=!0,f=e.clientX-d.getBoundingClientRect().left,v=e.clientY-d.getBoundingClientRect().top,e.preventDefault())})),document.addEventListener("mousemove",(function(e){if(!$)return;const t=e.clientX-f,n=e.clientY-v,o=window.innerWidth-d.offsetWidth,l=window.innerHeight-d.offsetHeight;d.style.left=`${Math.max(0,Math.min(t,o))}px`,d.style.top=`${Math.max(0,Math.min(n,l))}px`})),document.addEventListener("mouseup",(function(){$&&($=!1,d.style.cursor="",h())})),window.addEventListener("load",(function(){d&&(d.style.display="none",n=!1)})),document.addEventListener("keydown",(function(e){e.ctrlKey&&e.shiftKey&&"X"===e.key&&(n?(d.style.display="none",n=!1):(d.style.display="block",n=!0))})),document.getElementById("close-panel").addEventListener("click",(function(){d.style.display="none",n=!1,h()})),document.getElementById("clear-history").addEventListener("click",(function(){document.getElementById("selector-history").innerHTML="",a("Selector list cleared");try{chrome.storage.local.remove("selectorHistory",(function(){console.log("Selector history cleared from storage")}))}catch(e){console.error("Storage clearing error:",e)}})),d.style.display="none",n=!1,addToSelectorHistory=function(e,t,n){console.log("[addToSelectorHistory]",e,t),u(e,t),h(n)},chrome.runtime.onMessage.addListener((function(e,t,o){"togglePanel"===e.action&&("none"===d.style.display||""===d.style.display?(d.style.display="block",n=!0):(d.style.display="none",n=!1),o&&o({visible:n})),e.action})),window.addEventListener("load",(function(){setTimeout(g,500)})),document.addEventListener("DOMContentLoaded",(function(){d.style.display="none",n=!1,setTimeout(g,500)})),document.addEventListener("mouseup",(function(){$&&($=!1,h())})),document.addEventListener("keydown",(function(e){e.ctrlKey&&e.shiftKey&&"X"===e.key&&(n?(d.style.display="none",n=!1):(d.style.display="block",n=!0))})),document.getElementById("close-panel").addEventListener("click",(function(){d.style.display="none",n=!1,h()})),document.getElementById("clear-history").addEventListener("click",(function(){document.getElementById("selector-history").innerHTML="",a("Selector list cleared");try{chrome.storage.local.remove("selectorHistory",(function(){console.log("Selector history cleared from storage")}))}catch(e){console.error("Storage clearing error:",e)}})),document.addEventListener("keydown",(function(e){e.ctrlKey&&e.shiftKey&&"X"===e.key&&(n?(d.style.display="none",n=!1):(d.style.display="block",n=!0))})),document.getElementById("close-panel").addEventListener("click",(function(){d.style.display="none",n=!1,h()})),document.getElementById("clear-history").addEventListener("click",(function(){document.getElementById("selector-history").innerHTML="",a("Selector list cleared");try{chrome.storage.local.remove("selectorHistory",(function(){console.log("Selector history cleared from storage")}))}catch(e){console.error("Storage clearing error:",e)}})),function(){const e=history.pushState,t=history.replaceState;history.pushState=function(){h();const t=e.apply(this,arguments);return window.dispatchEvent(new Event("spa-navigation")),t},history.replaceState=function(){h();const e=t.apply(this,arguments);return window.dispatchEvent(new Event("spa-navigation")),e},window.addEventListener("popstate",(function(){h(),w(),setTimeout((()=>g(0)),500)})),window.addEventListener("spa-navigation",(function(){h(),w(),setTimeout((()=>g(0)),500)}))}();const S={java:[{value:"selenium",label:"Selenium",notations:["FindBy","By"]},{value:"selenide",label:"Selenide",notations:["By"]},{value:"playwright",label:"Playwright",notations:[]}],python:[{value:"selenium",label:"Selenium",notations:["By"]},{value:"playwright",label:"Playwright",notations:[]},{value:"robotframework",label:"Robot Framework",notations:[]}],csharp:[{value:"selenium",label:"Selenium",notations:["FindBy","By"]},{value:"playwright",label:"Playwright",notations:[]}],javascript:[{value:"selenium",label:"Selenium",notations:["By"]},{value:"playwright",label:"Playwright",notations:[]},{value:"cypress",label:"Cypress",notations:[]},{value:"puppeteer",label:"Puppeteer",notations:[]}],typescript:[{value:"selenium",label:"Selenium",notations:["By"]},{value:"playwright",label:"Playwright",notations:[]},{value:"cypress",label:"Cypress",notations:[]},{value:"puppeteer",label:"Puppeteer",notations:[]}],ruby:[{value:"selenium",label:"Selenium",notations:["By"]}],kotlin:[{value:"selenium",label:"Selenium",notations:["By"]},{value:"selenide",label:"Selenide",notations:["By"]}]};document.getElementById("language-tool-container").insertAdjacentHTML("beforeend",'\n  <label for="notation-select" style="font-size: 13px; color: #2c3e50; font-weight: 500;">Notation:</label>\n  <select id="notation-select" style="padding: 5px 10px; border-radius: 4px; border: 1px solid #ccc; min-width: 90px;"></select>\n');const k=document.getElementById("language-select"),B=document.getElementById("tool-select"),C=document.getElementById("notation-select");function T(){const e=k.value,t=S[e]||[];B.innerHTML="",t.forEach((e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.label,B.appendChild(t)})),P()}function P(){const e=k.value,t=B.value,n=(S[e]||[]).find((e=>e.value===t));C.innerHTML="",n&&n.notations.length>0?(C.style.display="",n.notations.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,C.appendChild(t)}))):C.style.display="none"}function I(){const t=document.getElementById("close-panel");t&&(t.onclick=function(){d.style.display="none",n=!1,h()});const o=document.getElementById("minimize-panel");o&&(o.onclick=function(){const e=d.querySelector("div:nth-child(2)"),t=document.getElementById("close-panel");"none"===e.style.display?(e.style.display="block",this.textContent="_",t.style.display="inline"):(e.style.display="none",this.textContent="□",t.style.display="inline")});const l=document.getElementById("activate-panel-selector");l&&(l.onclick=function(){e=!0,document.body.style.cursor="crosshair",a("Element selection mode active. Click on an element."),document.addEventListener("mouseover",c),document.addEventListener("mouseout",p)});const i=document.getElementById("copy-all-selectors");i&&(i.onclick=function(){const e=document.getElementById("language-select").value,t=document.getElementById("tool-select").value,n=document.getElementById("notation-select"),o=n&&"none"!==n.style.display?n.value:null,l=document.getElementById("selector-history").querySelectorAll("tr");if(0===l.length)return void a("Selector list is empty!",!0);let i=window.getCodeTemplate;i||(i=function(e,t,n,o){const l=n.startsWith("/")||n.startsWith("(")||n.startsWith("//*[@")||n.startsWith("//");if("java"===e&&"selenium"===t){if("FindBy"===o)return l?`// Java + Selenium\n@FindBy(xpath = "${n}")\nWebElement element;`:`// Java + Selenium\n@FindBy(css = "${n}")\nWebElement element;`;if("By"===o||!o)return l?`// Java + Selenium\nBy locator = By.xpath("${n}");`:`// Java + Selenium\nBy locator = By.cssSelector("${n}");`}if("java"===e&&"selenide"===t)return l?`// Java + Selenide\nSelenideElement element = $(By.xpath("${n}"));`:`// Java + Selenide\nSelenideElement element = $("${n}");`;if("python"===e&&"selenium"===t&&("By"===o||!o))return l?`# Python + Selenium\nelement = driver.find_element(By.XPATH, "${n}")`:`# Python + Selenium\nelement = driver.find_element(By.CSS_SELECTOR, "${n}")`;if("python"===e&&"robotframework"===t)return l?`# Robot Framework\nClick Element    xpath=${n}`:`# Robot Framework\nClick Element    css=${n}`;if("csharp"===e&&"selenium"===t){if("FindBy"===o)return l?`// C# + Selenium\n[FindBy(How = How.XPath, Using = "${n}")]\nprivate IWebElement element;`:`// C# + Selenium\n[FindBy(How = How.CssSelector, Using = "${n}")]\nprivate IWebElement element;`;if("By"===o||!o)return l?`// C# + Selenium\nvar element = driver.FindElement(By.XPath("${n}"));`:`// C# + Selenium\nvar element = driver.FindElement(By.CssSelector("${n}"));`}return"javascript"!==e&&"typescript"!==e||"selenium"!==t?"javascript"!==e&&"typescript"!==e||"cypress"!==t?"javascript"!==e&&"typescript"!==e||"playwright"!==t?"javascript"!==e&&"typescript"!==e||"puppeteer"!==t?"javascript"!==e&&"typescript"!==e||"webdriverio"!==t?"javascript"!==e&&"typescript"!==e||"testcafe"!==t?"ruby"===e&&"selenium"===t?l?`# Ruby + Selenium\nelement = driver.find_element(:xpath, "${n}")`:`# Ruby + Selenium\nelement = driver.find_element(:css, "${n}")`:"kotlin"===e&&"selenium"===t?l?`// Kotlin + Selenium\nval element = driver.findElement(By.xpath("${n}"))`:`// Kotlin + Selenium\nval element = driver.findElement(By.cssSelector("${n}"))`:"kotlin"===e&&"selenide"===t?l?`// Kotlin + Selenide\nval element = $(By.xpath("${n}"))`:`// Kotlin + Selenide\nval element = $("${n}")`:n:l?`// TestCafe (JS/TS)\nconst element = Selector(() => document.evaluate("${n}", document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue);`:`// TestCafe (JS/TS)\nconst element = Selector("${n}");`:`// WebdriverIO (JS/TS)\nconst element = await $("${n}");`:l?`// Puppeteer (JS/TS)\nconst [element] = await page.$x("${n}");`:`// Puppeteer (JS/TS)\nconst element = await page.$("${n}");`:l?`// Playwright (JS/TS)\nawait page.locator('xpath=${n}')`:`// Playwright (JS/TS)\nawait page.locator('${n}')`:l?`// Cypress (JS/TS)\ncy.xpath("${n}")`:`// Cypress (JS/TS)\ncy.get("${n}")`:l?`// JS/TS + Selenium\nconst element = await driver.findElement(By.xpath("${n}"));`:`// JS/TS + Selenium\nconst element = await driver.findElement(By.css("${n}"));`});let r="";l.forEach((n=>{const l=n.querySelectorAll("td");if(l.length>=2){l[0].textContent.trim();const n=l[1].textContent.split("(")[0].trim();r+=i(e,t,n,o)+"\n\n"}})),navigator.clipboard.writeText(r.trim()).then((()=>{a("All codes copied to clipboard!")})).catch((e=>{a("Copy all error: "+e.message,!0)}))});const r=document.getElementById("clear-history");r&&(r.onclick=function(){document.getElementById("selector-history").innerHTML="",a("Selector list cleared");try{chrome.storage.local.remove("selectorHistory",(function(){console.log("Selector history cleared from storage")}))}catch(e){console.error("Storage clearing error:",e)}})}function w(){document.getElementById("xpath-css-selector-panel")||(document.body.appendChild(d),d.style.display=n?"block":"none"),document.getElementById("selector-history")||(d.innerHTML='\n          <div style="padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background-color: #f8f9fa;">\n            <h3 style="margin: 0; font-size: 16px; color: #2c3e50;">Element Selector Generator</h3>\n            <div>\n              <button id="minimize-panel" style="background: none; border: none; cursor: pointer; font-size: 16px; color: #7f8c8d; margin-right: 5px;">_</button>\n              <button id="close-panel" style="background: none; border: none; cursor: pointer; font-size: 16px; color: #7f8c8d;">×</button>\n            </div>\n          </div>\n          <div style="padding: 12px;">\n            <div style="margin-bottom: 12px;">\n              <button id="activate-panel-selector" style="background-color: #3498db; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Select Element</button>\n            </div>\n            <div style="margin-top: 16px;">\n              <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Output</h4>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px; max-height: 100px; overflow-y: auto; word-break: break-all; font-family: monospace; font-size: 12px;" id="panel-selector-result">No element selected yet</div>\n              <div id="panel-validation-result" style="margin: 8px 0; font-size: 12px; min-height: 18px;"></div>\n              <button id="panel-copy-selector" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;" disabled>Copy</button>\n            </div>\n            <div id="element-attributes" style="margin-top: 16px; display: none;">\n              <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Element Properties</h4>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px; max-height: 200px; overflow-y: auto;">\n                <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n                  <thead>\n                    <tr style="background-color: #eee; text-align: left;">\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Feature</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Value</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Matching</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Process</th>\n                    </tr>\n                  </thead>\n                  <tbody id="attribute-list">\n                    \x3c!-- Features will be added here --\x3e\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div id="element-actions" style="margin-top: 16px; display: none;">\n              <h4 style="margin: 0 0 8px; font-size: 14px; color: #2c3e50;">Element Operations</h4>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; margin-bottom: 8px;">\n                <div id="element-type-info" style="margin-bottom: 8px; font-size: 12px;">Element Type: <span id="element-type">-</span></div>\n                <div id="click-action" style="margin-bottom: 8px;">\n                  <button id="perform-click" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Click</button>\n                </div>\n                <div id="input-action" style="margin-bottom: 8px; display: none;">\n                  <div style="display: flex; gap: 5px; margin-bottom: 5px;">\n                    <input type="text" id="input-value" placeholder="Enter value" style="flex: 1; padding: 6px; border: 1px solid #ddd; border-radius: 4px;">\n                    <button id="perform-input" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Send</button>\n                  </div>\n                </div>\n                <div id="select-action" style="margin-bottom: 8px; display: none;">\n                  <div style="display: flex; gap: 5px; margin-bottom: 5px;">\n                    <select id="select-options" style="flex: 1; padding: 6px; border: 1px solid #ddd; border-radius: 4px;">\n                      <option value="">Select option</option>\n                    </select>\n                    <button id="perform-select" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">Select</button>\n                  </div>\n                </div>\n                <div id="checkbox-action" style="margin-bottom: 8px; display: none;">\n                  <button id="perform-checkbox" style="background-color: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; width: 100%;">Change Status</button>\n                </div>\n              </div>\n            </div>\n            <div style="margin-top: 16px;">\n              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">\n                <h4 style="margin: 0; font-size: 14px; color: #2c3e50;">Selector List</h4>\n                <button id="clear-history" style="background-color: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 3px; cursor: pointer; font-size: 11px;">Clear List</button>\n              </div>\n              <div style="background-color: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; max-height: 150px; overflow-y: auto;">\n                <table style="width: 100%; border-collapse: collapse; font-size: 12px;">\n                  <thead>\n                    <tr style="background-color: #eee; text-align: left;">\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Type</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Selector</th>\n                      <th style="padding: 6px; border-bottom: 1px solid #ddd;">Process</th>\n                    </tr>\n                  </thead>\n                  <tbody id="selector-history">\n                    \x3c!-- Selector history will be added here --\x3e\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        ',window.selectedElement&&x(window.selectedElement))}k.addEventListener("change",T),B.addEventListener("change",P),T(),document.getElementById("copy-all-selectors").addEventListener("click",(function(){const e=document.getElementById("language-select").value,t=document.getElementById("tool-select").value,n=document.getElementById("notation-select"),o=n&&"none"!==n.style.display?n.value:null,l=document.getElementById("selector-history").querySelectorAll("tr");if(0===l.length)return void a("Selector list is empty!",!0);let i=window.getCodeTemplate;i||(i=function(e,t,n,o,l){const i=n.startsWith("/")||n.startsWith("(")||n.startsWith("//*[@")||n.startsWith("//"),r=function(e){let t=e.match(/^\/\/\*\[@id=['"]([^'"]+)['"]\]$/);if(t)return t[1];if(t=e.match(/^\/\/\w+\[@id=['"]([^'"]+)['"]\]$/),t)return t[1];if(t=e.match(/\[@id=['"]([^'"]+)['"]\]/),t)return t[1];let n=e.match(/^#([a-zA-Z0-9_-]+)$/);return n?n[1]:(n=e.match(/^#([a-zA-Z0-9_-]+)/),n?n[1]:(n=e.match(/^\[id=['"]([^'"]+)['"]\]$/),n?n[1]:(n=e.match(/^\w+\[id=['"]([^'"]+)['"]\]$/),n?n[1]:null)))}(n),a=null!==r;function d(e){return e.replace(/"/g,'\\"')}if("java"===e&&"selenium"===t){if("FindBy"===o){let e=l?"// Java + Selenium\n":"";return a?`${e}@FindBy(id = "${r}")\nWebElement element;`:i?`${e}@FindBy(xpath = "${d(n)}")\nWebElement element;`:`${e}@FindBy(css = "${d(n)}")\nWebElement element;`}let e=l?"// Java + Selenium\n":"";return a?`${e}By locator = By.id("${r}");`:i?`${e}By locator = By.xpath("${d(n)}");`:`${e}By locator = By.cssSelector("${d(n)}");`}if("java"===e&&"selenide"===t){let e=l?"// Java + Selenide\n":"";return a?`${e}SelenideElement element = $(By.id("${r}"));`:i?`${e}SelenideElement element = $(By.xpath("${d(n)}"));`:`${e}SelenideElement element = $("${d(n)}");`}if("java"===e&&"playwright"===t){let e=l?"// Java + Playwright\n":"";return a?`${e}Locator element = page.locator("#${r}");`:i?`${e}Locator element = page.locator("xpath=${d(n)}");`:`${e}Locator element = page.locator("${d(n)}");`}if("python"===e&&"selenium"===t){let e=l?"# Python + Selenium\n":"";return a?`${e}element = driver.find_element(By.ID, "${r}")`:i?`${e}element = driver.find_element(By.XPATH, "${d(n)}")`:`${e}element = driver.find_element(By.CSS_SELECTOR, "${d(n)}")`}if("python"===e&&"playwright"===t){let e=l?"# Python + Playwright\n":"";return a?`${e}element = page.locator("#${r}")`:i?`${e}element = page.locator("xpath=${d(n)}")`:`${e}element = page.locator("${d(n)}")`}if("python"===e&&"robotframework"===t){let e=l?"# Robot Framework\n":"";return a?`${e}Click Element    id=${r}`:i?`${e}Click Element    xpath=${d(n)}`:`${e}Click Element    css=${d(n)}`}if("csharp"===e&&"selenium"===t){if("FindBy"===o){let e=l?"// C# + Selenium\n":"";return a?`${e}[FindBy(How = How.Id, Using = "${r}")]\nprivate IWebElement element;`:i?`${e}[FindBy(How = How.XPath, Using = "${d(n)}")]\nprivate IWebElement element;`:`${e}[FindBy(How = How.CssSelector, Using = "${d(n)}")]\nprivate IWebElement element;`}let e=l?"// C# + Selenium\n":"";return a?`${e}var element = driver.FindElement(By.Id("${r}"));`:i?`${e}var element = driver.FindElement(By.XPath("${d(n)}"));`:`${e}var element = driver.FindElement(By.CssSelector("${d(n)}"));`}if("csharp"===e&&"playwright"===t){let e=l?"// C# + Playwright\n":"";return a?`${e}var element = await page.Locator("#${r}");`:i?`${e}var element = await page.Locator("xpath=${d(n)}");`:`${e}var element = await page.Locator("${d(n)}");`}if(("javascript"===e||"typescript"===e)&&"selenium"===t){let e=l?"// JS/TS + Selenium\n":"";return a?`${e}const element = await driver.findElement(By.id("${r}"));`:i?`${e}const element = await driver.findElement(By.xpath("${d(n)}"));`:`${e}const element = await driver.findElement(By.css("${d(n)}"));`}if(("javascript"===e||"typescript"===e)&&"playwright"===t){let e=l?"// Playwright (JS/TS)\n":"";return a?`${e}const element = page.locator('#${r}');`:i?`${e}const element = page.locator(\`xpath=${d(n)}\`);`:`${e}const element = page.locator("${d(n)}");`}if(("javascript"===e||"typescript"===e)&&"cypress"===t){let e=l?"// Cypress (JS/TS)\n":"";return a?`${e}cy.get("#${r}")`:i?`${e}cy.xpath("${d(n)}")`:`${e}cy.get("${d(n)}")`}if(("javascript"===e||"typescript"===e)&&"puppeteer"===t){let e=l?"// Puppeteer (JS/TS)\n":"";return a?`${e}const element = await page.$("#${r}");`:i?`${e}const elements = await page.$x("${d(n)}");\nconst element = elements[0];`:`${e}const element = await page.$("${d(n)}");`}if("ruby"===e&&"selenium"===t){let e=l?"# Ruby + Selenium\n":"";return a?`${e}element = driver.find_element(:id, "${r}")`:i?`${e}element = driver.find_element(:xpath, "${d(n)}")`:`${e}element = driver.find_element(:css, "${d(n)}")`}if("kotlin"===e&&"selenium"===t){let e=l?"// Kotlin + Selenium\n":"";return a?`${e}val element = driver.findElement(By.id("${r}"))`:i?`${e}val element = driver.findElement(By.xpath("${d(n)}"))`:`${e}val element = driver.findElement(By.cssSelector("${d(n)}"))`}if("kotlin"===e&&"selenide"===t){let e=l?"// Kotlin + Selenide\n":"";return a?`${e}val element = $By.id("${r}")`:i?`${e}val element = $By.xpath("${d(n)}")`:`${e}val element = $("${d(n)}")`}return n});let r="";l.forEach(((n,l)=>{const a=n.querySelectorAll("td");if(a.length>=2){a[0].textContent.trim();let n=a[1].cloneNode(!0);n.querySelectorAll("span").forEach((e=>e.remove()));let d=n.textContent.trim();r+=i(e,t,d,o,0===l)+"\n\n"}})),navigator.clipboard.writeText(r.trim()).then((()=>{a("All codes copied to clipboard!")})).catch((e=>{a("Copy all error: "+e.message,!0)}))})),I()})();